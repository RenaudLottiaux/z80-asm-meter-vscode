{
	"publisher": "theNestruo",
	"name": "z80-asm-meter",
	"version": "5.0.0",
	"preview": true,
	"engines": {
		"vscode": "^1.81.0"
	},
	"displayName": "Z80 Assembly meter",
	"description": "Z80 Assembly clock cycles and bytecode size meter",
	"icon": "doc/images/icon.128.png",
	"galleryBanner": {
		"color": "#191919",
		"theme": "dark"
	},
	"categories": [
		"Programming Languages"
	],
	"keywords": [
		"asm",
		"assembler",
		"assembly",
		"Zilog",
		"Z80",
		"Z80A",
		"Z80N",
		"Amstrad CPC",
		"CPC",
		"MSX",
		"ZX Spectrum",
		"ZX Spectrum Next"
	],
	"license": "LGPL-3.0",
	"homepage": "https://github.com/theNestruo/z80-asm-meter-vscode",
	"bugs": {
		"url": "https://github.com/theNestruo/z80-asm-meter-vscode/issues"
	},
	"repository": {
		"type": "git",
		"url": "https://github.com/theNestruo/z80-asm-meter-vscode.git"
	},
	"author": {
		"email": "theNestruo@gmail.com",
		"name": "NÃ©stor Sancho",
		"url": "https://thenestruo.github.io/"
	},
	"activationEvents": [
		"onLanguage:asm-collection",
		"onLanguage:pasmo",
		"onLanguage:z80",
		"onLanguage:z80-asm",
		"onLanguage:z80-macroasm",
		"onLanguage:zeus-asm",
		"workspaceContains:**/*.{asm,ASM,c,C,inc,INC,s,S,z80,Z80}"
	],
	"contributes": {
		"languages": [
			{
				"id": "z80-asm-meter",
				"aliases": [
					"Z80 Assembly"
				]
			}
		],
		"commands": [
			{
				"title": "Z80 Assembly meter: copy to clipboard",
				"command": "z80-asm-meter.copyToClipboard"
			}
		],
		"configuration": [
			{
				"order": 10,
				"properties": {
					"z80-asm-meter.languageIds": {
						"order": 10,
						"type": [
							"array",
							"null"
						],
						"description": "Additional language IDs for which the extension is enabled (such as \"c\" for in-lined assembly)",
						"default": [
							"asm-collection",
							"pasmo",
							"z80",
							"z80-asm",
							"z80-macroasm",
							"zeus-asm"
						]
					},
					"z80-asm-meter.platform": {
						"order": 20,
						"type": "string",
						"description": "Controls the instruction set and the timing information",
						"enum": [
							"z80",
							"msx",
							"pc8000",
							"cpc",
							"z80n"
						],
						"enumDescriptions": [
							"Default Z80 instruction set and default timing information",
							"MSX: default Z80 instruction set and Z80+M1 timing information (MSX standard)",
							"NEC PC-8000 series: default Z80 instruction set and both default and Z80+M1 timing information",
							"Amstrad CPC: default Z80 instruction set and timing measured in number of NOPs",
							"ZX Spectrum Next Extended Z80 instruction set and default timing information"
						],
						"default": "z80"
					},
					"z80-asm-meter.syntax": {
						"order": 30,
						"type": "string",
						"description": "Adjusts the main syntax of the assembler",
						"enum": [
							"default",
							"glass",
							"pasmo",
							"sjasm",
							"sjasmplus",
							"tniasm"
						],
						"enumDescriptions": [
							"Matches most assemblers",
							"Matches Glass Z80 assembler syntax",
							"Matches Pasmo assembler syntax",
							"Matches SjASM assembler syntax",
							"Matches SjASMPlus assembler syntax",
							"Matches tniASM assembler syntax"
						],
						"default": "default"
					}
				}
			},
			{
				"title": "Status bar",
				"order": 20,
				"properties": {
					"z80-asm-meter.statusBar.alignment": {
						"order": 10,
						"type": "string",
						"description": "Controls the status bar item position",
						"enum": [
							"leftmost",
							"left",
							"right",
							"rightmost"
						],
						"enumDescriptions": [
							"Leftmost position of the status bar",
							"Left side of the status bar",
							"Right side of the status bar",
							"Rightmost position of the status bar"
						],
						"default": "right"
					},
					"z80-asm-meter.statusBar.showInstruction": {
						"order": 20,
						"type": "boolean",
						"description": "Shows the processed instruction in the status bar",
						"default": false
					},
					"z80-asm-meter.statusBar.totalTimings": {
						"order": 30,
						"type": "string",
						"description": "Shows total timing calculations in the status bar",
						"enum": [
							"all",
							"combineAll",
							"smart",
							"combineSmart",
							"best",
							"default"
						],
						"enumDescriptions": [
							"Shows all the total timing calculations that apply to the selection",
							"Shows all the total timing calculations combined to reduce the size of the status bar item",
							"Shows total timing calculations that are relevant to the selection",
							"Shows total timing calculations that are relevant to the selection combined to reduce the size of the status bar item",
							"Shows the total timing calculation that best fits the selection",
							"Does not show any alternative total timing calculation"
						],
						"default": "smart"
					},
					"z80-asm-meter.statusBar.copyTimingsAsHints": {
						"order": 40,
						"type": "boolean",
						"description": "Enable copying timings as timing hints, instead of human readable format",
						"default": false
					},
					"z80-asm-meter.statusBar.compactSize": {
						"order": 50,
						"type": "boolean",
						"description": "Uses a compact suffix (B) for the size in bytes in the status bar",
						"default": false
					},
					"z80-asm-meter.statusBar.showBytes": {
						"order": 60,
						"type": "boolean",
						"description": "Shows the bytes (opcode) in the status bar",
						"default": false
					},
					"z80-asm-meter.statusBar.debounce": {
						"order": 70,
						"type": "integer",
						"description": "Milliseconds to prevent metering from being called too frequently when the selection changes",
						"default": 100
					},
					"z80-asm-meter.viewInstruction": {
						"type": "boolean",
						"deprecationMessage": "Use \"z80-asm-meter.statusBar.showInstruction\" instead"
					},
					"z80-asm-meter.timing.mode": {
						"type": "string",
						"deprecationMessage": "Use \"z80-asm-meter.statusBar.totalTimings\" instead"
					},
					"z80-asm-meter.viewBytes": {
						"type": "boolean",
						"deprecationMessage": "Use \"z80-asm-meter.statusBar.showBytes\" instead"
					},
					"z80-asm-meter.debounce": {
						"type": "integer",
						"deprecationMessage": "Use \"z80-asm-meter.statusBar.debounce\" instead"
					}
				}
			},
			{
				"title": "Assembler syntax",
				"order": 30,
				"properties": {
					"z80-asm-meter.syntax.label.colonOptional": {
						"order": 10,
						"type": "boolean",
						"description": "When enabled, the label trailing colon is optional and the labels must not be indented. When disabled, the labels must be followed by a colon (:) and can be indented",
						"default": false
					},
					"z80-asm-meter.syntax.repeat": {
						"order": 20,
						"type": "string",
						"description": "Enables support for parsing single instruction repetitions",
						"enum": [
							"none",
							"brackets",
							"dot"
						],
						"enumDescriptions": [
							"Disables single instruction reptitions",
							"The single instruction reptitions are specified within square brackets ([ and ]) before the instruction",
							"The single instruction reptitions are specified after a dot (.) before the instruction"
						],
						"default": "none"
					},
					"z80-asm-meter.syntax.lineSeparator": {
						"order": 30,
						"type": "string",
						"description": "Adjusts the line separator to match the syntax of the assembler",
						"enum": [
							"none",
							"colon",
							"pipe"
						],
						"enumDescriptions": [
							"Does not allow multiple instructions on a single line",
							"Use colon (:) to have more than one instruction on a line",
							"Use pipe (|) to have more than one instruction on a line. This behaviour matches some assemblers such as tniASM"
						],
						"default": "none"
					},
					"z80-asm-meter.syntax.enable.fakeInstructions": {
						"order": 40,
						"type": "boolean",
						"description": "Enables SjASMPlus fake instructions support",
						"default": false
					},
					"z80-asm-meter.syntax.enable.registerListInstructions": {
						"order": 42,
						"type": "boolean",
						"description": "Enables SjASMPlus register list instructions support",
						"default": false
					},
					"z80-asm-meter.syntax.enable.negativeConditions": {
						"order": 44,
						"type": "boolean",
						"description": "Enables Glass negative conditions support",
						"default": false
					},
					"z80-asm-meter.syntax.enable.dupEdup": {
						"order": 46,
						"type": "boolean",
						"description": "Enables DUP/EDUP repetition blocks",
						"default": false
					},
					"z80-asm-meter.syntax.enable.reptEndr": {
						"order": 48,
						"type": "boolean",
						"description": "Enables REPT/ENDR repetition blocks",
						"default": false
					},
					"z80-asm-meter.syntax.enable.reptEndm": {
						"order": 50,
						"type": "boolean",
						"description": "Enables REPT/ENDM repetition blocks",
						"default": false
					},
					"z80-asm-meter.syntax.label": {
						"type": "string",
						"deprecationMessage": "Use \"z80-asm-meter.syntax.label.colonOptional\" instead"
					}
				}
			},
			{
				"title": "Parser",
				"order": 40,
				"properties": {
					"z80-asm-meter.parser.directives.defsAsInstructions": {
						"order": 10,
						"type": "boolean",
						"description": "When enabled, tries to parse DEFS directive bytes as single byte instructions",
						"default": false
					},
					"z80-asm-meter.directivesAsInstructions": {
						"type": "string",
						"deprecationMessage": "Use \"z80-asm-meter.parser.directives.defsAsInstructions\" instead"
					}
				}
			},
			{
				"title": "Total timing calculation",
				"order": 50,
				"properties": {
					"z80-asm-meter.timing.executionFlow.enabled": {
						"order": 10,
						"type": "boolean",
						"mark": "Enables execution flow total timing calculation",
						"default": true
					},
					"z80-asm-meter.timing.executionFlow.threshold": {
						"order": 20,
						"type": "number",
						"description": "Minimum number of instructions to be selected for the calculation of execution flow total timing",
						"default": 2
					},
					"z80-asm-meter.timing.executionFlow.requireConditional": {
						"order": 30,
						"type": "boolean",
						"description": "Requires at least one conditional instruction to enable execution flow total timing calculation",
						"default": true
					},
					"z80-asm-meter.timing.executionFlow.stopOnUnconditionalJump": {
						"order": 32,
						"type": "boolean",
						"description": "Disables execution flow total timing calculation if an unconditional JP, JR or RET instruction is found",
						"default": true
					},
					"z80-asm-meter.timing.atExit.enabled": {
						"order": 60,
						"type": "boolean",
						"description": "Enables total timing calculation of the execution flow to the selected exit point",
						"default": true
					},
					"z80-asm-meter.timing.atExit.threshold": {
						"order": 70,
						"type": "number",
						"description": "Minimum number of instructions to be selected for the calculation of total timing calculation of the execution flow to the selected exit point",
						"default": 2
					},
					"z80-asm-meter.timing.atExit.requireConditional": {
						"order": 80,
						"type": "boolean",
						"description": "Requires at least one conditional instruction to enable total timing calculation of the execution flow to the selected exit point",
						"default": true
					},
					"z80-asm-meter.timing.atExit.stopOnUnconditionalJump": {
						"order": 82,
						"type": "boolean",
						"description": "Disables total timing calculation of the execution flow to the selected exit point if an unconditional JP, JR or RET instruction is found",
						"default": true
					},
					"z80-asm-meter.timing.threshold": {
						"type": "number",
						"deprecationMessage": "Use \"z80-asm-meter.timing.executionFlow.threshold\" and/or \"z80-asm-meter.timing.atExit.threshold\" instead"
					}
				}
			},
			{
				"title": "Timing hints",
				"order": 60,
				"properties": {
					"z80-asm-meter.timing.hints.enabled": {
						"order": 10,
						"type": "string",
						"description": "Enables timing hints read from the line comment",
						"enum": [
							"none",
							"subroutines",
							"any",
							"ignoreCommentedOut"
						],
						"enumDescriptions": [
							"Disables timing hints",
							"Subroutine timing hint will be added to CALL, DJNZ, JP, JR, RET or RST instructions only",
							"Any timing hint found, regardless the instruction. This includes empty lines",
							"Any timing hint found, regardless the instruction, but trying to exclude empty lines that look like commented out source code"
						],
						"default": "subroutines"
					},
					"z80-asm-meter.timing.hints.regexps": {
						"order": 20,
						"type": [
							"array",
							"null"
						],
						"description": "An array of regexp-based user-defined timing hints",
						"default": [],
						"items": {
							"type": "object",
							"properties": {
								"pattern": {
									"type": "string",
									"description": "The pattern of the regular expression to match against the line comment"
								},
								"flags": {
									"type": [ "string", "undefined" ],
									"description": "The string indicating the flags of the regular expression"
								},
								"z80": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides Z80 default timing hint"
								},
								"msx": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides Z80+M1 timing hint (MSX standard)"
								},
								"m1": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides Z80+M1 timing hint"
								},
								"cpc": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides timing hint measured in number of NOPs"
								},
								"t": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides default timing hint"
								},
								"ts": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides default timing hint"
								}
							}
						}
					},
					"z80-asm-meter.timing.hints": {
						"type": "string",
						"deprecationMessage": "Use \"z80-asm-meter.timing.hints.enabled\" instead",
						"enum": [
							"subroutines",
							"any",
							"none"
						]
					}

				}
			},
			{
				"title": "Macros",
				"order": 70,
				"properties": {
					"z80-asm-meter.macros": {
						"order": 10,
						"type": [
							"array",
							"null"
						],
						"description": "An array of user-defined macros",
						"default": [],
						"items": {
							"type": "object",
							"properties": {
								"name": {
									"type": "string",
									"description": "The name of the macro; will be matched against the mnemonic of the source code."
								},
								"z80": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides Z80 default timing hint"
								},
								"msx": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides Z80+M1 macro timing information (MSX standard)"
								},
								"m1": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides Z80+M1 macro timing information"
								},
								"cpc": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides macro timing measured in number of NOPs"
								},
								"t": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides default macro timing"
								},
								"ts": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides default macro timing"
								},
								"size": {
									"type": [
										"number",
										"string",
										"undefined"
									],
									"description": "Declares or overrides macro byte count"
								},
								"instructions": {
									"type": [
										"array",
										"undefined"
									],
									"description": "The macro definition, as instructions",
									"items": {
										"type": "string"
									}
								}
							}
						}
					}
				}
			}
		]
	},
	"main": "./dist/bundle.js",
	"scripts": {
		"vscode:prepublish": "npm run esbuild-base -- --minify",
		"esbuild-base": "esbuild ./src/extension.ts --bundle --outfile=dist/bundle.js --external:vscode --format=cjs --platform=node",
		"esbuild": "npm run esbuild-base -- --sourcemap",
		"esbuild-watch": "npm run esbuild-base -- --sourcemap --watch",
		"tsc-compile": "tsc -p ./",
		"tsc-watch": "tsc -watch -p ./",
		"lint": "eslint src --ext ts",
		"pretest": "npm run tsc-compile && npm run lint",
		"test": "node ./out/test/runTest.js"
	},
	"devDependencies": {
		"@types/glob": "^8.1.0",
		"@types/mocha": "^10.0.2",
		"@types/node": "20.x",
		"@types/vscode": "^1.81.0",
		"@typescript-eslint/eslint-plugin": "^6.7.3",
		"@typescript-eslint/parser": "^6.7.3",
		"@vscode/test-electron": "^2.3.4",
		"esbuild": "^0.19.4",
		"eslint": "^8.50.0",
		"glob": "^10.3.10",
		"mocha": "^10.0.0",
		"typescript": "^5.2.2"
	}
}
